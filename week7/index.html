<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WDD 330 - Week 7</title>
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="styles/style.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Yusei+Magic&display=swap" rel="stylesheet">
</head>

<body>
    <header>
        <nav>
            <button id="menu-button" onclick="toggleMenu()">&#9776;
            </button>
        <ol id="responsive-nav" class="hide"></ol>
        </nav>
        <h1>Notes</h1>
        <h2>Week 7</h2>
        <h3>"Remembering may be one of the most precious gifts the Spirit can give you. "
        </h3>
        <h4 style="font-style: italic;">Henry B. Eyring</h4>
    </header>
    <main>
        <section>
            <h3>Further Functions</h3>
<h4>Call and Apply Methods</h4>
<p>The apply() method works the same way as the call() method apart from the fact that the arguments of the function are provided as an array, even if there is only one argument. For example: </p>
<pre>square.call(null, 4)</pre>
<p>would become</p>
<pre>square.apply(null, [4])</pre>
<strong>When would I use an IIFE?</strong>

<h4>Functions that Define and Rewrite Themselves</h4>
<p>The following function redefines itself.</p>
<pre>
function party(){
    console.log('Wow this is amazing!');
    party = function(){
        console.log('Been there, got the T-Shirt');
    }
}
</pre>
<p>
The first time through, it would print ‘Wow this is amazing!’ <br>
All the following times, it will print ‘'Been there, got the T-Shirt'
</p>
<strong>Be careful! Doing that can make you lose properties!</strong>

<h4>Event-driven Asynchronous Programming</h4>
<pre>function wait(message, callback, seconds){
    setTimeout(callback,seconds * 1000);
    console.log(message);
}</pre>
<p>The seconds are timed by 1000 because it is really milliseconds.</p>
<pre>
    wait('This tape will self-destruct in five seconds ... ', selfDestruct, 5);
    console.log('Hmmm, should I accept this mission or not ... ?');
    << 'This tape will self-destruct in five seconds ... '
    << 'Hmmm, should I accept this mission or not ... ? '
    << 'BOOOOM!'
</pre>
<p>In the example above, the message is first displayed, then what's next is displayed even though it's outside the function. Finally the <code>selfDestruct</code> message is displayed after 5 seconds.</p>
<p>I don't think I understood what a promise does.</p>
<p>It would be fun to see how all those different types of functions are used/useful is real programming situations.</p>
</section>
<section>
    <h3>Ajax</h3>
    <p>By the way, Ajax is one of my favorite heroes in Greek mythology.</p>
    <p>Here is the basic syntax of the Fetch API</p>
    <pre>
    fetch('https://example.com/data')
    .then( // code that handles the response )
    .catch( // code that runs if the server returns an error )
    </pre>
    <p>The <code>redirect()</code> method redirects the user to another url.</p>
    <pre>.then( response => response.redirect(newURL));</pre>
    <p>JSON is the most common format for AJAX responses. Here is an example of how it could be resolved.</p>
    <pre>
        fetch(url)
        .then( response => response.json() ); // transforms the JSON data into a JavaScript object
        .then( data => console.log(Object.entries(data)) )
        .catch( error => console.log('There was an error: ', error))
    </pre>
    <p>I can make a <strong>POST</strong> request to send what I want to send somewhere.</p>
    <strong>How can I get JSON information, transform it, and then send it back somewhere?</strong>
<p>Here is a challenge I'd like to complete:</p>
<pre>
    1. Go to https://jsonplaceholder.typicode.com/ and find the API call for getting the list of all users
    2. Make a script or data flow in a tool/language of your choice to fetch the users list from the API
    3. Have the script/flow transform the entire list of user data and submit to the API endpoint per the following requirements:
    
    HTTP POST to ‘https://scheduler.luminarycxm.com/api/v1/cleaned/data/test/'
    
    content-type: application/json
    
    Request Body 
    
    {
        “applicant”: “{enter your name here}”,
        "users": [
            { 
                "first_name": "StringValue",
                "last_name": "StringValue",
                "company_name": "StringValue",
                "company_full_address": "Street Address, City, State, Zip", 
                "website": "StringValue",
                "phone": 2083567880 
            },
        …
        ]
    }
    
    Successful 200 response 
    {
        “Success”: true, 
         “message” : “thank you {your applicant name} for your application”
    }
</pre>
</section>

    </main>
    <footer>

    </footer>
    <script src="../scripts/main.js"></script>
</body>

</html>